# 最终开发与部署工作流程指南

## 背景

我们之前遇到的所有问题，最终都归结于对开发流程和部署流程的混淆。本指南将澄清正确的、标准的开发与部署工作流程，以确保应用能正常编译、运行并拥有良好性能。

## 正确的工作流程

请严格按照以下步骤在**正确的环境**中操作。

### 步骤 1: 在你的本地开发机器上 (Local Machine)

这是所有开发工作的所在地。

**1.1. (关键) 生成 TypeScript 类型**

这是解决所有类型错误的第一步，也是最关键的一步。

*   **确保你的本地 Supabase 服务正在运行** (`supabase start`)。
*   **打开终端**，进入本项目 (`Beer-Terms`) 的根目录。
*   **运行以下命令**，它会连接到你本地的数据库并创建 `src/types/supabase.ts` 文件：

    ```bash
    supabase gen types typescript --local > beer-terms-dictionary/src/types/supabase.ts
    ```

**1.2. (如果尚未完成) 确保数据库已优化**

*   在你的本地 Supabase SQL Editor 中，执行 `doc/database_optimization.md` 中的 SQL 脚本，以创建必要的索引。

**1.3. (如果尚未完成) 确保有示例数据**

*   在你的本地 Supabase SQL Editor 中，执行 `doc/sample_data.md` 中的 SQL 脚本，以填充数据库。

**1.4. 构建项目**

*   在终端中，运行构建命令。对于本项目，它应该是：

    ```bash
    npm run build
    ```
*   这个命令会读取 `src` 目录下的所有代码，并生成一个用于部署的 `dist` 文件夹。

### 步骤 2: 部署到服务器 (Deployment Server)

服务器只负责运行构建好的应用，不需要源代码。

**2.1. 部署构建产物**

*   将你本地机器上生成的 `dist` 文件夹的**全部内容**，上传并部署到你的服务器的网站根目录。

---

遵循这个流程，你的应用将会：
1.  在本地无错误地编译。
2.  在服务器上高性能地运行。

所有问题都将得到最终解决。
