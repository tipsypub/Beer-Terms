# 文档片段选择器使用指南

## ✨ 功能概述

文档片段选择器(Document Picker)是一个强大的工具，可以让你精准选择文档中的任意部分作为上下文，发送给AI模型进行处理。

## 🚀 主要特性

### 📝 智能文档解析
- **自动识别文档结构**: 标题、段落、列表、代码块、表格、引用等
- **层次化显示**: 按照文档的逻辑结构组织内容
- **内容预览**: 每个片段都有清晰的预览

### 🎯 精准选择
- **多选支持**: 可以选择多个不同类型的片段
- **类型筛选**: 快速选择特定类型的内容(如所有标题、所有代码块)
- **批量操作**: 全选、清空、按类型选择

### 🔄 智能上下文处理
- **自动组合**: 将选中的片段智能组合为连贯的上下文
- **大小显示**: 实时显示选择内容的字符数和大小
- **上下文提示**: 在对话中清晰标识使用了上下文

## 📖 使用方法

### 1. 打开选择器
在AI助手面板中，点击 📄 文档图标按钮打开文档片段选择器

### 2. 浏览文档片段
选择器会自动解析当前编辑器中的内容，显示所有可选的片段：

#### 片段类型标识：
- 🏷️ **标题** (H1-H6): 蓝色左边框
- 📄 **段落**: 灰色左边框  
- 📋 **列表**: 绿色左边框
- 💻 **代码块**: 紫色左边框
- 📊 **表格**: 橙色左边框
- 💬 **引用**: 黄色左边框

#### 片段信息：
- **行号范围**: 显示在右上角 (L1-10)
- **内容预览**: 显示片段的前100字符
- **大小信息**: 显示内容的字节大小

### 3. 选择片段
- **单击选择**: 点击片段卡片或复选框
- **快速选择**: 使用顶部的快捷按钮
  - `全选`: 选择所有片段
  - `清空`: 清空所有选择
  - `标题`: 选择所有标题
  - `代码`: 选择所有代码块

### 4. 预览和使用
- **预览**: 点击底部的"预览"按钮查看选中内容
- **使用**: 点击"使用选中内容"将片段设为上下文

### 5. 发送消息
选择上下文后，在输入框输入问题并发送。AI将基于选中的上下文给出更精准的回答。

## 💡 使用技巧

### 🎯 精准提问
选择相关的代码片段，然后问："这段代码有什么问题？"或"如何优化这个函数？"

### 📚 文档分析
选择文档的特定章节，问："总结这部分内容的要点"或"这些功能如何使用？"

### 🔍 代码审查
选择多个相关函数，问："这些函数之间的关系是什么？"或"是否存在重复代码？"

### 📖 学习辅助
选择复杂的概念段落，问："用简单的话解释这个概念"或"举个例子说明"

## 🎨 界面功能详解

### 头部工具栏
- **选择统计**: 显示已选择的片段数量和类型
- **内容大小**: 显示选中内容的总大小
- **快速操作**: 全选、清空、按类型选择的快捷按钮

### 片段列表
- **可视化选择**: 选中的片段有蓝色背景和指示器
- **类型图标**: 每种类型都有独特的图标
- **悬停效果**: 鼠标悬停时片段会轻微上浮

### 底部操作栏
- **选择摘要**: 显示选择的数量和总大小
- **预览按钮**: 在模态框中查看完整的选中内容
- **使用按钮**: 将选中内容设为AI对话的上下文

### 上下文显示
选择上下文后，在AI面板中会显示：
- **蓝色提示条**: 显示已选择上下文的摘要
- **消息标识**: 在用户消息上方显示使用了上下文
- **清除按钮**: 可以随时清除当前选择的上下文

## 🔧 高级功能

### 📊 性能优化
- **增量解析**: 只在内容变化时重新解析
- **懒加载**: 大文档的片段按需加载
- **内存管理**: 自动清理未使用的解析结果

### 🎛️ 自定义配置
- **解析规则**: 可以自定义文档片段的识别规则
- **显示选项**: 可以调整预览长度、排序方式等
- **快捷键**: 支持键盘快捷操作

## 🚨 注意事项

1. **内容大小限制**: 选择的上下文过大可能影响AI响应速度
2. **实时更新**: 编辑器内容变化时，选择器会自动重新解析
3. **上下文持久**: 选择的上下文会保持到手动清除或关闭选择器
4. **令牌消耗**: 较大的上下文会消耗更多的API令牌

## 🎉 最佳实践

### ✅ 推荐做法
- 选择与问题最相关的片段
- 避免选择过多不相关的内容
- 利用类型筛选快速定位目标内容
- 使用预览功能确认选择的内容

### ❌ 避免做法
- 不要选择整个大型文档作为上下文
- 避免选择与问题无关的片段
- 不要频繁切换上下文，容易造成混乱

## 🔮 未来计划

- **智能推荐**: 基于问题内容自动推荐相关片段
- **语义搜索**: 支持基于语义的片段搜索
- **自定义标签**: 为片段添加自定义标签和分类
- **导出功能**: 导出选中的片段为独立文件

---

通过文档片段选择器，你可以更精准地与AI进行交互，获得更好的回答质量! 🎯